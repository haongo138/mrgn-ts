{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _objectSpread from\"@babel/runtime/helpers/objectSpread2\";import invariant from'fbjs/lib/invariant';import unmountComponentAtNode from\"../unmountComponentAtNode\";import renderApplication,{getApplication as _getApplication}from\"./renderApplication\";var emptyObject={};var runnables={};var componentProviderInstrumentationHook=function componentProviderInstrumentationHook(component){return component();};var wrapperComponentProvider;var AppRegistry=function(){function AppRegistry(){_classCallCheck(this,AppRegistry);}_createClass(AppRegistry,null,[{key:\"getAppKeys\",value:function getAppKeys(){return Object.keys(runnables);}},{key:\"getApplication\",value:function getApplication(appKey,appParameters){invariant(runnables[appKey]&&runnables[appKey].getApplication,\"Application \"+appKey+\" has not been registered. \"+'This is either due to an import error during initialization or failure to call AppRegistry.registerComponent.');return runnables[appKey].getApplication(appParameters);}},{key:\"registerComponent\",value:function registerComponent(appKey,componentProvider){runnables[appKey]={getApplication:function getApplication(appParameters){return _getApplication(componentProviderInstrumentationHook(componentProvider),appParameters?appParameters.initialProps:emptyObject,wrapperComponentProvider&&wrapperComponentProvider(appParameters));},run:function run(appParameters){return renderApplication(componentProviderInstrumentationHook(componentProvider),wrapperComponentProvider&&wrapperComponentProvider(appParameters),appParameters.callback,{hydrate:appParameters.hydrate||false,initialProps:appParameters.initialProps||emptyObject,mode:appParameters.mode||'concurrent',rootTag:appParameters.rootTag});}};return appKey;}},{key:\"registerConfig\",value:function registerConfig(config){config.forEach(function(_ref){var appKey=_ref.appKey,component=_ref.component,run=_ref.run;if(run){AppRegistry.registerRunnable(appKey,run);}else{invariant(component,'No component provider passed in');AppRegistry.registerComponent(appKey,component);}});}},{key:\"registerRunnable\",value:function registerRunnable(appKey,run){runnables[appKey]={run:run};return appKey;}},{key:\"runApplication\",value:function runApplication(appKey,appParameters){var isDevelopment=process.env.NODE_ENV!=='production'&&process.env.NODE_ENV!=='test';if(isDevelopment){var params=_objectSpread({},appParameters);params.rootTag=\"#\"+params.rootTag.id;console.log(\"Running application \\\"\"+appKey+\"\\\" with appParams:\\n\",params,\"\\nDevelopment-level warnings: \"+(isDevelopment?'ON':'OFF')+\".\"+(\"\\nPerformance optimizations: \"+(isDevelopment?'OFF':'ON')+\".\"));}invariant(runnables[appKey]&&runnables[appKey].run,\"Application \\\"\"+appKey+\"\\\" has not been registered. \"+'This is either due to an import error during initialization or failure to call AppRegistry.registerComponent.');return runnables[appKey].run(appParameters);}},{key:\"setComponentProviderInstrumentationHook\",value:function setComponentProviderInstrumentationHook(hook){componentProviderInstrumentationHook=hook;}},{key:\"setWrapperComponentProvider\",value:function setWrapperComponentProvider(provider){wrapperComponentProvider=provider;}},{key:\"unmountApplicationComponentAtRootTag\",value:function unmountApplicationComponentAtRootTag(rootTag){unmountComponentAtNode(rootTag);}}]);return AppRegistry;}();export{AppRegistry as default};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}